{"version":3,"file":"../tracker.js","sources":["tracker.js"],"sourcesContent":["/**\n * Description\n */\n\n/*global ga:false */\n/*global capitalP:false */\n\njQuery(document).ready(function ($) {\n\n  \"use strict\";\n\n  /**\n   * Get URL\n   *\n   * @param {String} url\n   * @returns {String}\n   */\n  var makeUrl = function( url ) {\n    return url.replace(/^https?:\\/\\/[^\\/]+/, '');\n  };\n\n  // Track pod cast events\n  $('.podcast_player').each(function(index, player){\n    // Check if tracker exists.\n    var $player = $(this);\n    var $tracker = $player.find('.capitalp-media-tracker');\n    if ( !$tracker.length ) {\n      return true;\n    }\n    // Add event listeners\n    var played = false;\n    var playCount = 0;\n    var episodeId = $tracker.attr('data-episode-id');\n    var episodeAuthor = $tracker.attr('data-episode-author');\n    var episodeTags = $tracker.attr('data-episode-tags');\n    var href = makeUrl( $tracker.attr('data-src') );\n    // Save play count\n    $player.find('audio,video').bind('play', function(e){\n      try {\n        gtag('event', 'audio_play', {\n          episode: episodeId,\n        });\n      } catch (err) {}\n    });\n    // Save other event\n    $.each(['ended', 'pause', 'error', 'abort'], function(i, eventType){\n      $player.find('audio,video').bind(eventType, function(event){\n        try {\n          gtag('event', 'audio_' + eventType, {\n            episode: episodeId,\n          });\n        } catch (err) {}\n      });\n    });\n  });\n});\n"],"names":["jQuery","document","ready","$","each","index","player","$player","this","$tracker","find","length","episodeId","attr","replace","bind","e","gtag","episode","err","i","eventType","event"],"mappings":"AAOAA,OAAOC,QAAQ,EAAEC,MAAM,SAAUC,GAE/B,aAaAA,EAAE,iBAAiB,EAAEC,KAAK,SAASC,EAAOC,GAExC,IAAIC,EAAUJ,EAAEK,IAAI,EAChBC,EAAWF,EAAQG,KAAK,yBAAyB,EACrD,GAAK,CAACD,EAASE,OACb,MAAO,CAAA,EAGT,IAEIC,EAAYH,EAASI,KAAK,iBAAiB,EAC3BJ,EAASI,KAAK,qBAAqB,EACrCJ,EAASI,KAAK,mBAAmB,EAC/BJ,EAASI,KAAK,UAAU,EAjBjCC,QAAQ,qBAAsB,EAAE,EAmB3CP,EAAQG,KAAK,aAAa,EAAEK,KAAK,OAAQ,SAASC,GAChD,IACEC,KAAK,QAAS,aAAc,CAC1BC,QAASN,CACX,CAAC,CACY,CAAb,MAAOO,IACX,CAAC,EAEDhB,EAAEC,KAAK,CAAC,QAAS,QAAS,QAAS,SAAU,SAASgB,EAAGC,GACvDd,EAAQG,KAAK,aAAa,EAAEK,KAAKM,EAAW,SAASC,GACnD,IACEL,KAAK,QAAS,SAAWI,EAAW,CAClCH,QAASN,CACX,CAAC,CACY,CAAb,MAAOO,IACX,CAAC,CACH,CAAC,CACH,CAAC,CACH,CAAC"}